# Redis Production Configuration
# Save this as redis.conf and mount it in production

# Disable RDB snapshots (development only)
save ""

# Disable AOF (Append Only File) - we use Redis as cache, not persistent store
appendonly no

# Memory management
# Increased memory for load-testing; if Redis crashes due to OOM, raise this
# value or throttle producers. For local experiments set to 1gb.
maxmemory 2gb
maxmemory-policy allkeys-lru

# Connection limits
# Allow more clients during heavy testing. Adjust based on environment.
maxclients 5000
timeout 300

# Disable dangerous commands in production
rename-command FLUSHDB ""
rename-command FLUSHALL ""
rename-command SHUTDOWN SHUTDOWN_REDIS

# Logging
loglevel notice
logfile ""

# Disable protected mode in containerized environments
protected-mode no

# Performance optimizations
tcp-keepalive 300
tcp-backlog 511

# Disable unnecessary features for cache-only use
# activerehashing no